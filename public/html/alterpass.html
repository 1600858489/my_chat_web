<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>修改密码</title>
    <link rel="stylesheet" href="../css/alterpass.css">
  </head>
  <body>
    <div class="change-password-container">
      <h2>修改密码</h2>
      <form class="from-pass" @submit.prevent="changePassword">
        <div class="input-group">
          <label for="oldPassword">旧  密 码:</label>
          <input type="password" id="oldPassword" v-model="oldPassword" required>
        </div>
        <div class="input-group">
          <label for="newPassword">新  密 码:</label>
          <input type="password" id="newPassword" v-model="newPassword" required>
        </div>
        <div class="input-group">
          <label for="confirmPassword">确认密码:</label>
          <input type="password" id="confirmPassword" v-model="confirmPassword" required>
        </div>
        <div class="submitpass">
          <button type="submit" onclick="sendMessageToParent(2)">提交</button>
          <button type="submit" onclick="sendMessageToParent(2)">取消</button>          
        </div>

      </form>
    </div>
  </body>
  
  <script>
    // 发送请求到父页面
    document.querySelector('.from-pass').addEventListener('submit', function(event) {
        event.preventDefault();

        const oldPassword = document.getElementById('oldPassword').value;
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        // 检查新密码和确认密码是否一致
        if (newPassword !== confirmPassword) {
            alert('新密码和确认密码不一致，请重新输入！');
            return;
        }

        const data = {
            type: 'changePassword',
            oldPassword: oldPassword,
            newPassword: newPassword,
            confirmPassword: confirmPassword
        };

        // 发送数据到父页面
        window.parent.postMessage(data, '*');
    });

  </script>
</html>